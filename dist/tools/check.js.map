{"version":3,"sources":["tools/check.js"],"names":[],"mappings":"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","file":"tools/check.js","sourcesContent":["/**\n * Created by Bell on 16/8/30.\n */\n\nimport * as regex from '../utils/regex';\n\n// check field\n\nexport function checkProjectEmpty(ctx, field, value) {\n    return checkEmpty(ctx, 'Project', field, value);\n}\n\nexport function checkPatchEmpty(ctx, field, value) {\n    return checkEmpty(ctx, 'Patch', field, value);\n}\n\nexport function checkSetPwdTokenEmpty(ctx, field, value) {\n    return checkEmpty(ctx, 'SetPwdToken', field, value);\n}\n\nexport function checkUserEmpty(ctx, field, value) {\n    return checkEmpty(ctx, 'User', field, value);\n}\n\nexport function checkEmpty(ctx, resource, field, value) {\n    if (!value) {\n        ctx.status = 422;\n        ctx.body = {\n            message: field + ' is empty',\n            errors: [\n                {\n                    'resource': resource,\n                    'field': field,\n                    'code': 'missing_field'\n                }\n            ]\n        };\n        return false;\n    }\n    return true;\n}\n\n// check resource\n\nexport function checkUserResourceEmpty(ctx, value) {\n    return checkResourceEmpty(ctx, 'User', value);\n}\n\nexport function checkProjectResourceEmpty(ctx, value) {\n    return checkResourceEmpty(ctx, 'Project', value);\n}\n\nexport function checkPatchResourceEmpty(ctx, value) {\n    return checkResourceEmpty(ctx, 'kPatch', value);\n}\n\nexport function checkResourceEmpty(ctx, resource, value) {\n    if (!value) {\n        ctx.status = 422;\n        ctx.body = {\n            message: resource + ' is not existed',\n            errors: [\n                {\n                    'resource': resource,\n                    'code': 'missing'\n                }\n            ]\n        };\n        return false;\n    }\n    return true;\n}\n\n// check valid\n\nexport function checkValidEmail(ctx, email) {\n    if (!regex.validEmail(email)) {\n        ctx.status = 422;\n        ctx.body = {\n            message: 'Invalid email',\n            errors: [\n                {\n                    resource: 'User',\n                    field: 'email',\n                    code: 'invalid'\n                }\n            ]\n        };\n        return false;\n    }\n    return true;\n}\n\nexport function checkValidPassword(ctx, password) {\n    if (!regex.validPassword(password)) {\n        ctx.status = 422;\n        ctx.body = {\n            message: 'Invalid password',\n            errors: [\n                {\n                    resource: 'User',\n                    field: 'password',\n                    code: 'invalid'\n                }\n            ]\n        };\n        return false;\n    }\n    return true;\n}\n"],"sourceRoot":"/source/"}