{"version":3,"sources":["models/setPwdToken.js"],"names":[],"mappings":";;;;;;;;AAIA;;;;;;AACA,mBAAS,OAAT,GAAmB,OAAO,OAA1B,C,CALA;;;;AAOA,IAAM,cAAc,IAAI,mBAAS,MAAb,CAAoB;AACpC,YAAQ,EAAC,MAAM,MAAP,EAAe,SAAS,IAAxB,EAD4B;AAEpC,SAAK,EAAC,MAAM,MAAP,EAAe,SAAS,CAAxB,EAF+B;AAGpC,SAAK,EAAC,MAAM,MAAP,EAAe,SAAS,CAAxB,EAH+B;AAIpC,YAAQ,EAAC,MAAM,MAAP,EAAe,SAAS,CAAxB;AAJ4B,CAApB,CAApB;;AAOA,YAAY,GAAZ,CAAgB,MAAhB;AAAA,gEAAwB,iBAAuB,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,4BADc,GACP,IADO;;AAEpB,4BAAI,KAAK,GAAL,IAAY,CAAhB,EAAmB;AACf,iCAAK,GAAL,GAAW,KAAK,GAAL,EAAX;AACH;AACD,4BAAI,KAAK,GAAL,IAAY,KAAK,GAArB,EAA0B;AACtB,iCAAK,GAAL,GAAY,KAAK,GAAL,GAAW,KAAK,EAAL,GAAU,EAAV,GAAe,IAAtC;AACH;AAPmB,yDAQb,MARa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAxB;;AAAA,aAAuC,OAAvC;AAAA;AAAA;;AAAA,WAAuC,OAAvC;AAAA;;kBAWe,mBAAS,KAAT,CAAe,aAAf,EAA8B,WAA9B,C","file":"models/setPwdToken.js","sourcesContent":["/**\n * Created by Bell on 16/8/27.\n */\n\nimport mongoose from 'mongoose';\nmongoose.Promise = global.Promise;\n\nconst SetPwdToken = new mongoose.Schema({\n    userid: {type: String, require: true},\n    iat: {type: Number, default: 0},\n    exp: {type: Number, default: 0},\n    status: {type: Number, default: 0}\n});\n\nSetPwdToken.pre('save', async function preSave(next) {\n    const user = this;\n    if (user.iat <= 0) {\n        user.iat = Date.now();\n    }\n    if (user.exp <= user.iat) {\n        user.exp =  user.iat + 24 * 60 * 60 * 1000;\n    }\n    return next();\n});\n\nexport default mongoose.model('setPwdToken', SetPwdToken);\n"],"sourceRoot":"/source/"}