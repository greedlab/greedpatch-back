{"version":3,"sources":["controllers/file.js"],"names":[],"mappings":";;;;;;;;;;gEAeO,iBAAsB,GAAtB,EAA2B,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACH,4BAAI,CAAC,IAAI,GAAT,EAAc;AACV,gCAAI,KAAJ,CAAU,GAAV;AACH;AACG,4BAJD,GAIQ,IAAI,GAAJ,CAAQ,IAJhB;;AAKH,4BAAI,CAAC,IAAL,EAAW;AACP,gCAAI,KAAJ,CAAU,GAAV;AACH;AACD,4BAAI,CAAC,KAAK,QAAV,EAAoB;AAChB,gCAAI,KAAJ,CAAU,GAAV;AACH;AACK,gCAXH,GAWc,IAAI,GAAJ,CAAQ,IAAR,CAAa,QAAb,IAAyB,MAXvC;AAYG,gCAZH,GAYc,cAAI,OAAJ,CAAY,iBAAO,YAAnB,EAAiC,YAAY,QAA7C,CAZd;;AAaH,4BAAI,MAAJ,GAAa,GAAb;AACA,4BAAI,IAAJ,GAAW,EAAC,kBAAD,EAAX;;AAdG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAe,M;;;;;AAXtB;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;AACA,IAAM,QAAQ,oBAAU,kBAAI,IAAd,CAAd,C,CAbA","file":"controllers/file.js","sourcesContent":["/**\n * Created by Bell on 16/9/1.\n */\n\nimport path from 'path';\nimport multer from 'koa-multer';\nimport uuid from 'node-uuid';\nimport url from 'url';\n\nimport config from '../config';\n\nimport Debug from 'debug';\nimport pkg from '../../package.json';\nconst debug = new Debug(pkg.name);\n\nexport async function upload(ctx, next) {\n    if (!ctx.req) {\n        ctx.throw(500);\n    }\n    let file = ctx.req.file;\n    if (!file) {\n        ctx.throw(500);\n    }\n    if (!file.filename) {\n        ctx.throw(500);\n    }\n    const filename = ctx.req.file.filename || 'file';\n    const file_url = url.resolve(config.back_address, '/files/' + filename);\n    ctx.status = 201;\n    ctx.body = {file_url};\n}"],"sourceRoot":"/source/"}